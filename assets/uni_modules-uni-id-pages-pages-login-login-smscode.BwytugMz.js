import{_ as o,Y as s,a as e,r as t,b as a,c as n,w as i,i as p,o as c,l,m as u,y as r,z as m,u as d}from"./index-CTufusbk.js";import{_ as h}from"./uni-id-pages-sms-form.h1V7dkG2.js";import{_ as f}from"./uni-forms.Dq28Hf7X.js";import{_ as g}from"./uni-popup-captcha.DQ9RnQAu.js";import{m as b}from"./login-page.mixin.BAZPScUG.js";import"./uni-captcha.BHcS5MJC.js";import"./uni-easyinput.Ibur2lMU.js";const y=o({mixins:[b],data:()=>({code:"",phone:"",captcha:"",logo:"/static/logo.png"}),computed:{tipText(){return"验证码已通过短信发送至"+this.phone}},onLoad({phoneNumber:o}){this.phone=o},onShow(){document.onkeydown=o=>{var s=o||window.event;s&&13==s.keyCode&&this.submit()}},methods:{submit(){const o=s.importObject("uni-id-co",{errorOptions:{type:"toast"}});if(6!=this.code.length)return this.$refs.smsCode.focusSmsCodeInput=!0,e({title:"验证码不能为空",icon:"none",duration:3e3});o.loginBySms({mobile:this.phone,code:this.code,captcha:this.captcha}).then((o=>{this.loginSuccess(o)})).catch((o=>{"uni-id-captcha-required"==o.errCode?this.$refs.popup.open():console.log(o.errMsg)})).finally((o=>{this.captcha=""}))}}},[["render",function(o,s,e,b,y,_){const C=r,j=p,V=m,w=t(a("uni-id-pages-sms-form"),h),x=d,k=t(a("uni-forms"),f),S=t(a("uni-popup-captcha"),g);return c(),n(j,{class:"uni-content"},{default:i((()=>[l(j,{class:"login-logo"},{default:i((()=>[l(C,{src:y.logo},null,8,["src"])])),_:1}),l(V,{class:"title"},{default:i((()=>[u("请输入验证码")])),_:1}),l(V,{class:"tip"},{default:i((()=>[u("先输入图形验证码，再获取短信验证码")])),_:1}),l(k,null,{default:i((()=>[l(w,{focusCaptchaInput:"",modelValue:y.code,"onUpdate:modelValue":s[0]||(s[0]=o=>y.code=o),type:"login-by-sms",ref:"smsCode",phone:y.phone},null,8,["modelValue","phone"]),l(x,{class:"uni-btn send-btn",type:"primary",onClick:_.submit},{default:i((()=>[u("登录")])),_:1},8,["onClick"])])),_:1}),l(S,{onConfirm:_.submit,modelValue:y.captcha,"onUpdate:modelValue":s[1]||(s[1]=o=>y.captcha=o),scene:"login-by-sms",ref:"popup"},null,8,["onConfirm","modelValue"])])),_:1})}],["__scopeId","data-v-93225fe2"]]);export{y as default};
