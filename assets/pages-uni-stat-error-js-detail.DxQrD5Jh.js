import{_ as t,V as a,r as e,b as i,c as o,w as s,i as n,o as r,l as p}from"./index-BdDI6p4_.js";import{_ as l}from"./uni-stat-table.Ce0zzHXz.js";import{_ as g}from"./uni-pagination.GfsLFm8f.js";import{s as u,p as h}from"./util.C4iP5xno.js";import{p as d}from"./fieldsMap.CvZ24T3N.js";import"./uni-tooltip.DsbdAVZl.js";const c=t({data:()=>({popupFieldsMap:d,options:{pageSize:20,pageCurrent:1,total:0},query:{error_hash:"",create_time:[]},loading:!1,tableData:[]}),onLoad(t){let{error_hash:a,create_time:e}=t;a&&(e=Number(e),this.query.error_hash=a,this.query.create_time=[e,e+864e5],this.getTableData(u(this.query)))},methods:{changePageCurrent(t){this.options.pageCurrent=t.current,this.getTableData(u(this.query))},changePageSize(t){this.options.pageSize=t,this.options.pageCurrent=1,this.getTableData(u(this.query))},getTableData(t){const{pageCurrent:e}=this.options;this.loading=!0;a.database().collection("uni-stat-error-logs").where(t).orderBy("create_time","desc").skip((e-1)*this.options.pageSize).limit(this.options.pageSize).get({getCount:!0}).then((t=>{const{count:a,data:e}=t.result;this.options.total=a;for(const i of e)i.create_time=h(i.create_time,"dateTime");this.tableData=e})).finally((()=>{this.loading=!1}))}}},[["render",function(t,a,u,h,d,c){const m=e(i("uni-stat-table"),l),f=e(i("uni-pagination"),g),_=n;return r(),o(_,{class:"fix-top-window"},{default:s((()=>[p(_,{class:"uni-container"},{default:s((()=>[p(m,{data:d.tableData,filedsMap:d.popupFieldsMap,loading:d.loading},null,8,["data","filedsMap","loading"]),p(_,{class:"uni-pagination-box"},{default:s((()=>[p(f,{"show-icon":"","show-page-size":"","page-size":d.options.pageSize,current:d.options.pageCurrent,total:d.options.total,onChange:c.changePageCurrent,onPageSizeChange:c.changePageSize},null,8,["page-size","current","total","onChange","onPageSizeChange"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-d581af0c"]]);export{c as default};
